# 一、计算机网络体系结构

1. 什么是计算机网络

将分散、独立的计算机系统通过通信设备和线路连接起来的功能完善的资源共享和信息传递系统。

2. 计算机网络的功能

（1）资源共享

（2）数据通信

（3）分布式处理

3. 计算机网络的结构

ISP结构：因特网服务提供者/因特网服务提供商，是一个向广大用户综合提供互联网接入业务、信息

业务、和增值业务的公司，如中国电信、中国联动、中国移动等。分为主干ISP、地区ISP和本地ISP。

4. 计算机网络的组成部分

（1）硬件

（2）软件

（3）协议

5. 计算机网络的工作方式

边缘部分通过C/S和P2P方式进行互联，也就是终端用户通过C/S和P2P方式进行互联。核心部分为边缘部分提供服务，核心部分是网络部分，主要有交换机路由器等。

实际上计算机网络是自顶向下进行工作，上面是计算机和应用程序（上三层），下面是通信部分（下四层）。

6. 标准化工作

原因：为了统一标准，包括法定标准（OSI）和事实标准（TCP/IP）

7. 性能指标

（1）带宽：最高比特流速度，单位是比特/秒。

（2）吞吐量：单位时间内通过某个网络的数据量，单位是b/s。表示实际数据传输速率。

（3）时延：数据从一端传输到另一端的时间，指的是数据传输的时间延迟。包括：发送时延，传播时延，排队时延，处理时延。

（4）时延带宽积：时延*带宽，代表链路上的数据量

（5）往返时延：发送到收到确认的时间

（6）利用率：信道利用率=数据通过时间/总时间

8. 分层结构

上下层独立，下层为上层提供服务。

几个概念

（1）实体：在每层中起作用的实体。

（2）协议：同一层进行数据交换的规则、标准或者约定。

（3）接口：上层使用下层服务的入口。

（4）服务：上层使用下层的服务，或者说下层为上层提供的功能。

9. OSI模型

（1）应用层：FTP，SMTP，HTTP

（2）表示层：数据格式变换，数据加密解密，数据压缩和恢复。

（3）会话层：建立同步，主要用于建立、管理、终止会话。

（4）传输层：实现端到端通信，传输内容是报文段或用户数据。可靠传输/不可靠传输、差错控制、流量控制、复用分用。

（5）网络层：实现源端到目的端的通信。路由选择、流量控制、差错控制、拥塞控制。

（6）数据链路层：将网络层数据组装成帧。组装成帧、插座控制、流量控制、访问控制。

（7）物理层：实现比特流传输。定义接口特性、定义传输模式、定义传输速率、比特同步、比特编码

![image-20230305215554512](/Users/tom/Library/Application Support/typora-user-images/image-20230305215554512.png)

10. TCP/IP模型

（1）应用层：FTP，SMTP，HTTP

（2）传输层：实现端到端通信，传输内容是报文段或用户数据。可靠传输/不可靠传输、差错控制、流量控制、复用分用。

（3）网络层：实现源端到目的端的通信。路由选择、流量控制、差错控制、拥塞控制。

（4）数据链路层：将网络层数据组装成帧。组装成帧、插座控制、流量控制、访问控制。

（5）物理层：实现比特流传输。定义接口特性、定义传输模式、定义传输速率、比特同步、比特编码

11. 两种模型的不同点

（1）OSI定义三点：服务、协议、接口 

（2）OSI先出现，参考模型先于协议发明，不偏向特定协议

（3）TCP/IP设计之初就考虑到异构网互联问题，将IP作为重要层次

![image-20230305231241803](/Users/tom/Library/Application Support/typora-user-images/image-20230305231241803.png)

# 二、物理层

1. 物理层主要功能

物理层解决的是如何在连接计算机的传输媒体上传输比特流，确定传输媒体的一些属性

2. 物理层的几个特性

（1）机械特性：接口规格，形状，引线数目，引脚

（2）电气特性：电压范围，阻抗匹配，传输速率，距离限制

（3）功能特性：表明某一点评表示何种意义

（4）过程特性：定义各条物理线路的工作规程和时序关系

3. 通信方式

（1）单工通信

（2）半双工通信/双向交替通信

（3）全双工通信/双向同时通信

4. 数据传输方式

（1）串行传输

（2）并行传输

5. 实现同步的传输通信方式

（1）同步传输

（2）异步传输

6. 物理层的几个概念

（1）码元：代表离散数值的基本波形

（2）速率：数据的传输数率

（3）波特：

（4）带宽：单位时间内某一点到另一点的最高数据率

7. 信号传输的两个定律

（1）奈式准则

在低通，无噪音的条件下，极限码元的传输速率=$2Wlog_2V$

W是带宽，V是几种码元

（2）香农定理

在带宽受限，有噪音的信道中，数据的极限传输速率=$Wlog_2(1+S/N)(b/s)$

W是带宽，S/N是信噪比

8. 编码与调制

（1）编码：生成数字信号

（2）调制：生成模拟信号

9. 几种常见的编码

（1）非归零编码：1：高，0：低

（2）曼切斯特编码：1：由高向低，0：由低向高

（3）差分曼切斯特编码：1：上一个码元的后半部分和这个码元的前半部分相同，0：上一个码元的后半部分和这个码元的前半部分相反。

（4）归零编码

（5）反向不归零编码

10. 数据交换方式

存储转发：根据路由协议转发到一个节点，节点进行差错检测，通过检测以后再根据路由选择进行转发，并给源主机发送确认信息，源主机删除备份。

（1）电路交换：建立连接-通信-释放资源

![image-20230306145524770](/Users/tom/Library/Application Support/typora-user-images/image-20230306145524770.png)

（2）报文交换：单位是报文，传输过程是采用存储转发方式

![image-20230306145552856](/Users/tom/Library/Application Support/typora-user-images/image-20230306145552856.png)

（3）分组交换：将数据分割成不同小组，然后再进行存储转发，基本原理和报文交换几乎相同，分组交换包括数据报方式和虚电路方式

![image-20230306145614542](/Users/tom/Library/Application Support/typora-user-images/image-20230306145614542.png)

数据报方式：无连接，发送方可以随时的发送分组，传输过程可能是乱序重复和丢失

虚电路方式：建立一条源主机到目的主机的位于网络层的逻辑连接，路径上的节点维持一张虚电路表，和电路交换类似，但建立的连接是网络层面的。

![image-20230306150947373](/Users/tom/Library/Application Support/typora-user-images/image-20230306150947373.png)

11. 物理层的传输介质

（1）导向性传输介质：双绞线，放大器，中继器，集线器，同轴电缆，光纤

（2）非导向性传输介质：无线电波，光波，微波

中继器：放大模拟信号，连接的是两个相同的网络

集线器：方法转发信号，不能隔离冲突域

# 三、数据链路层

1. 功能

数据链路层的最基本的服务是讲来自网络层的数据可卡的传输到相邻节点的目标机网络层，从而加强物理层传输比特流的能力，实现无差错传输

（1）封装成帧和透明传输

（2）差错控制

（3）流量控制

（4）可靠传输

2.封装成帧

数据链路层负责将ip数据报封装成帧，封装成帧（透明传输）的方法包括

（1）字符计数法

（2）字符填充法

（3）零比特填充法

（4）违规编码法

![image-20230306214545771](/Users/tom/Library/Application Support/typora-user-images/image-20230306214545771.png)



3. 透明传输

透明传输指的是无论比特内容是什么，都能正常传输，假定比特流中的某一段组合和某个特殊控制符一样，这时候加上转义字符作为区分，从而实现透明传输。下面介绍几种封装成帧的方法到底如何实现透明传输的。

（1）字符计数法：帧首部使用一个计数字段，记录帧的长度

（2）字符填充法：在每个特殊字段前面加特殊字节，从而表示此字段非特殊字符

（3）零比特填充法：帧的首部和尾部是01111110，而如果在数据段里面出现五个1就立即在他们的后面补充一个0，从而避免特殊字符的出现

（4）违规编码法

4. 差错控制

传输过程中由于噪音的存在，可能会出现差错

（1）位错：校验

（2）帧错：重复、丢失、失序

5. 校验

（1）奇偶校验码：在最后一位添加0或1，最终是1的个数是奇数（奇校验）或者偶数（偶校验）

（2）循环冗余码（CRC）：后面补充r位，保证补充以后得二进制数除以一个r+1的二进制数余数为0。当收到数据除以多项式为0，则认为正确，否则认为出错。

无论是奇偶校验码还是循环冗余码，都只能都不能进行纠错，甚至不能完全保证接受的数据是正确的，下面有一种可以用于纠错的码---海明码：

（3）海明码：在1,2,4,8...位置上插入标志位，第i个校验码是序号二进制数的第i位为1的所有数据的奇偶校验码，比如第一个校验码对应的是1、3、5、7。纠错：如果校验码的序列是100，那就是第4位出错。

6. 流量机制和可靠传输机制

当发送过快接收过慢时就会出现拥塞，从而需要流量控制。

链路层的流量控制：当接收不了数据就不回复确认，保证数据能收到

传输层的流量控制：给发送方发送一个窗口公告。

7. 流量控制协议

（1）停等协议：每发送一个，接收方等待回答再发送。每接收一个，就会给发送方一个回答。接受方超时没收到回答会选择重传。停等协议信道利用率底下，

（2）后退N帧协议（GBN）：一次发送N个，接受时按顺序接受，并给出回答，发送方未收到第i个的回答会从i号开始重发。发送窗口的尺寸：$1<=W_T<=2^n-1$，n表示的是采用n个比特对帧编号

（3）选择重传协议（SR）：一次发送N个，接收时也接收N个，并给出回答，当发送方未收到第i个的回答，会仅仅将i号重发。发送窗口最好等于接收窗口

8. 随机访问介质访问控制

随机访问介质控制协议是对信道的随机访问协议，主要目的是更合理的利用信道（空闲的时候尽量占用，不空闲的时候尽量减少冲突）

（1）ALOHA协议：不监听信道，随机发，冲突了接收方就不予确认，然后发送方进行重发

（2）CSMA协议（载波监听多路访问协议）：监听信道，如果信道没人占用，则直接发送，若信道已经被占用，用以下策略。

1-坚持CSMA：闲则直接发送，忙则一直监听，直到空闲，冲突则等待一个随机时间监听

非坚持CSMA：闲则直接发送，忙和冲突则等待一个随机时间监听，

p坚持CSMA：空闲则p概率传输，1-p概率等到下一个时间槽再发送，忙则持续监听信道，冲突则等下一个时间槽再监听

![image-20230307104852762](/Users/tom/Library/Application Support/typora-user-images/image-20230307104852762.png)

（3）CSMA/CD（载波监听/碰撞检测）协议：载波监听还不够，因为电磁波传输速率有限，不能完全同步确认是否发生冲突。因此加入了碰撞检测协议，当检测到发生了碰撞，会选择一定的算法进行重传：

截断二进制指规避算法：

基本退避时间是$2\tau$，当第$i$次冲突则随机选择在$(0,1,2,3...2^i-1)*(2\tau)$时间重发。最多的重传次数是16，若大于16，则返回错误，且超过10次，$i$就固定为10。

为了防止在传输完之前，也没检测到碰撞。传输时间应该大于碰撞检测时间（往返时间$2\tau$）。既最小帧长=$2\tau *$数据传输速率。

（4）CSMA/CA（载波监听/碰撞避免）协议：因为在无线局域网内无法做到完全的碰撞检测，导致冲突但是没法检测到。

发送数据前，先检测信道是否空闲。

空闲则发出**RTS****（****request to send****）**，RTS包括发射端的地址、接收端的地址、下一份数据将持续发送的时间

等信息；信道忙则等待。

接收端收到RTS后，将响应**CTS（clear to send）**。

发送端收到CTS后，开始发送数据帧（同时预约信道：发送方告知其他站点自己要传多久数据）。

接收端收到数据帧后，将用CRC来检验数据是否正确，正确则响应ACK帧。

发送方收到ACK就可以进行下一个数据帧的发送，若没有则一直重传至规定重发次数为止（采用二进制指数退避算法来确定随机的推迟时间）。

9. 轮询访问介质访问控制

（1）轮询协议：设置一个主节点，主节点轮询询问其他节点是否使用信道

（2）令牌环协议：令牌在节点环上依次传递，在一定时间内节点可以占用信道。

缺点：令牌开销，等待延迟，单点故障

10. 局域网的基本概念和体系结构

局域网的决定因素：网络拓扑，传输介质，介质访问控制方法

11. LLC子层和MAC子层

LLC子层负责识别网络层协议，然后对他们进行封装

MAC子层负责数据帧的封装卸装，以及帧的寻址和识别，帧的接受与发送，链路的管理，帧的差错控制。

12. 以太网

（1）以太网是无连接、不可靠的服务

无连接：不建立连接

不可靠：不进行发送确认，但会进行差错检测，差错帧直接丢弃。

（2）采用星型拓扑，总线型

（3）曼切斯特编码

（4）CSMA/CD介质

13. 通信适配器

每个适配器中有一个全球唯一的48位二进制地址，钱324位代表厂家，后24位厂家自己指定。

14. 以太网MAC帧

![image-20230307152341881](/Users/tom/Library/Application Support/typora-user-images/image-20230307152341881.png)

15. IEEE 802.11是无线局域网的通用标准

![image-20230307152451853](/Users/tom/Library/Application Support/typora-user-images/image-20230307152451853.png)

16. ppp协议

点对点协议，只支持全双工链路

![image-20230307152930738](/Users/tom/Library/Application Support/typora-user-images/image-20230307152930738.png)

![image-20230307152944434](/Users/tom/Library/Application Support/typora-user-images/image-20230307152944434.png)

17. HDLC协议

只支持全双工链路，将节点分为三种站：主站、从站、复合站，可以进行可靠传输。

![image-20230307153451730](/Users/tom/Library/Application Support/typora-user-images/image-20230307153451730.png)

18. 两种协议的异同

相同点：

（1）HDLC和PPP都支持全双工链路

（2）都可以实现透明传输

（3）都进行差错检测，都不检测差错

不同点：

（1）ppp是面向字节的，HDLC是面向比特的

（2）ppp是无序号和确认机制，不可靠。HDLC是有序号和确认机制，可靠。

19. 链路层的设备

（1）网桥：对MAC地址进行过滤，想目的接口转发帧，隔离冲突域

（2）交换机：转发，包括直通式交换机和存储转发式交换机

隔离冲突域：能进行定向转发帧

隔离广播域：对于广播信号，从一个广播域定向转发到另一个广播域

链路层设备（网桥，交换机）：能隔离冲突域，不能隔离广播域。

网络层设备(路由器)：能隔离冲突域，也能隔离广播域。

20. 数据链路层的协议

可靠控制协议：停等协议、后退N帧协议、选择重传协议

信道检测协议：ALOHA协议、CSMA、CSMA/CD、CSMA/CA

数据传输协议：ppp、HDLC协议

# 四、网络层

1. 主要任务

将分组从源端传送到目的端，传输单位是数据报

（1）分组转发

（2）路由选择

（3）拥塞控制

（4）异构网络互联

2. IP数据报的格式

![image-20230307160655158](/Users/tom/Library/Application Support/typora-user-images/image-20230307160655158.png)

3. 最大传送单元（MTU）

指的是一次性传输的ip数据报最大长度，超过这个长度应当分片。以太网的MTU是1500字节。

4. IPV4地址

32位组成的地址

（1）A类：以0开头，8+24

（2）B类：以10开头，16+16

（3）C类：以110开头，24+8

（4）D类：以1110开头，多播地址

（5）E类：以1111开头，今后使用

5. 一些特殊的ip地址

全0：主机自己地址，路由表中表示默认地址

全1：本网的广播地址（路由器不转发）

网络号特定，主机号全1：广播地址

网络号特定，主机号全0：表示一个网络

网络号是127，主机不是全0或1：用于本地软件环回测试

6. 网络地址变换（NAT）

路由器内部有个NAT表，实现WAN端到LAN端的转换

7. 子网划分和子网掩码

利用子网掩码将网络划分成子网，子网掩码的非零部分是主机号。

将ip地址和子网掩码进行与，可以求得网络地址。

8. 使用子网时的路由转发协议

路由表内容：

（1）目的网络地址

（2）目的网络的子网掩码

（3）下一跳的地址

进行分组转发时：

（1）提取目的IP地址，查看是否能直接交付

（2）将目的地址和子网掩码与计算，若结果与目的网络地址相同则转发到目的网络，若不相同则进行下一条检查。

（3）遇到默认路由0.0.0.0则直接转发给默认路由。

（4）若没有能转发的，就直接报错

9. 无分类编制CIDR

CIDR消除了传统的分类，融合了子网掩码和子网掩码

ip地址/网络前缀

10. 超网

将多个子网合并，缩短网络前缀叫做超网

11. 最长前缀匹配

使用CIDR时，查找的路由表可能有几个匹配结果，这时候采用最长前缀匹配策略，也就是选择最长网络前缀的路由。前缀越长，地址块却小，路由越具体

12. ARP协议

目的：IP地址和MAC地址实现映射，决定下一跳发送给谁

（1）发送给本网络的主机，找到本网络主机的硬件地址

（2）发送给另一网络上的主机，找到本网络上一个路由器硬件地址

（3）路由器发送给本网络的主机：找到本网络上主机的硬件地址

（4）路由器发送给另一网络的主机：找到本网络上的一个路由器地址。

13. DHCP协议

DHCP协议：动态分配ip地址的协议

IP地址分配方法

（1）静态配置

（2）动态配置

DHCP执行过程：

（1）主机广播DHCP发现报文

（2）服务器广播DHCP提供报文

（3）主机广播DHCP请求报文

（4）服务器广播DHCP确认报文 

14. ICMP协议

    ICMP报文

    ![image-20230308160455474](/Users/tom/Library/Application Support/typora-user-images/image-20230308160455474.png)

网际控制报文协议：

（1）差错报文：终点不可达，源点抑制，时间超过，参数问题，改变路由

![image-20230308160749631](/Users/tom/Library/Application Support/typora-user-images/image-20230308160749631.png)

（2）询问报文：回送请求和回答报文，时间戳请求和回答报文

15. ICMP的应用

PING和Traceroute

16. IPV6

![image-20230308161207451](/Users/tom/Library/Application Support/typora-user-images/image-20230308161207451.png)

17. IPv4 vs IPv6

（1）IPv6将地址从32位扩展到128位

（2）IPv6将IPv4的校验和字段彻底移除

（3）IPv6支持即插即用，IPv4使用的是DHCP

（4）IPv6只在源点分片，转发过程中不进行分片

（5）增加了身份验证功能

18. IPv6向IPv4的过渡

（1）双栈协议：同时启用两个协议。

（2）隧道技术：将IPv6数据打包成IPv4然后发送，另一端接收后卸包。

19. 路由选择

路由选择指的是分组到达路由器时，根据转发表决定应该向哪个接口转发

20. 静态路由选择算法

人工干预转发，既手动编辑一个路由转发表

21. 动态路由算法

（1）链路状态路由算法

全局式路由算法，实际上就是迪杰斯特拉算法，根据迪杰斯特拉找到最短路径，每个节点需要了解所有的网络拓扑信息。每个节点需要将自身的链路状态定期发送给其他所有节点

（2）距离向量路由算法

分散式路由选择算法，路由表中有<目的网络，距离，下一跳的路由地址>

每个路由器维护一个路由转发表，开始的时候只记录相邻的节点，转发自身状态到邻居节点。

当Y收到邻居节点X的信息，若目的网络不存在Y的表中，直接将X的记录中的这一项掺插入Y表，并且距离+1，下一跳为X。若目的地址已经存在，对比距离，若通过X到目的节点距离更短，则修改距离，并把这一项的下一跳设为X。当自身路由信息变化时，会再次转发自己路由表到邻居节点

初始化的时候等待180s后还没有收到邻居发过来的信息，则认为距离不可达，距离设为16。

22. 自治系统内的IGP

（1）RIP：是一种基于距离向量的路由选择协议，每30s广播一次信息，当距离超过16时认为不可达

（2）OSPF：是一种基于分布式链路状态的协议，向所有节点发送自己的信息。使用的是ip数据报进行传输

23. 自治系统间EGP

（1）BGP：边界网关协议

原理：

每个自治系统都选出一个发言人，发言人如果要交流信息，就要先建立TCP连接，然后在此连接上建立BGP报文和BGP会话，用于交换路由信息。每个BGP交换好路由信息以后，会计算出较好的路由。

24. 三种路由协议的比较

![image-20230308185145001](/Users/tom/Library/Application Support/typora-user-images/image-20230308185145001.png)

25. 组播

（1）组播组：用IP组播地址进行标识的一个集合。任何用户主机（或其他接收设备），加入一个组播组，就成为了该组成员，可以识别并接收发往该组播组的组播数据。
（2）组播源：组播信息的发送者称为“组播源”，即拓扑中的Server。一个组播源可以同时向多个组播组发送数据，多个组播源也可以同时向一个组播组发送报文。组播源通常不需要加入组播组。
（3）组播组成员：所有加入某组播组的主机便成为该组播组的成员，即拓扑中的PC1和PC2。组播组中的成员是动态的，主机可以在任何时刻加入或离开组播组。组播组成员可以广泛地分布在网络中的任何地方。
（4）组播路由器：支持三层组播功能的路由器或三层交换机，即拓扑中的各个Router。组播路由器不仅能够提供组播路由功能，也能够在与用户连接的末梢网段上提供组播组成员的管理功能。（默认路由器的组播功能是关闭的）

![image-20230308185530682](/Users/tom/Library/Application Support/typora-user-images/image-20230308185530682.png)



# 五、传输层

1. 传输层的功能

（1）进程与进程之间的逻辑通信

（2）复用与分用

（3）传输层对接收到的报文进行差错检测

（4）传输层的两种协议

2. 传输层的两种协议

（1）TCP连接可靠，面向连接，全双工通信，面向字节流，时延大，适用于大文件传输

（2）UDP连接：不可靠，不面向连接，面向报文，无拥塞控制，首部开销小，适用于小文件传输。

3. 端口号

（1）熟知端口号：0~1023

![image-20230308190535774](/Users/tom/Library/Application Support/typora-user-images/image-20230308190535774.png)

（2）登记端口号：1024~49151

（3）熟知端口号和登记端口号都是服务端的的端口号，客户端的算口号范围是49152~65535

4. TCP协议

序号：发送数据的第一个编号。

确认号：希望收到的数据，如果是N则说明N-1都已经收到。

6个控制位：紧急位，确认位，推送位。复位，同部位，终止位

5. TCP数据传输过程

（1）连接建立

（2）数据传送

（3）连接释放

6. 三次握手

（1）客户端发送连接请求报文段，无应用层数据其中SYN=1(说明是连接请求/接受报文)，seq=x（发送序号为x）

（2）服务端为此次连接分配缓存和变量，并向客户端发送确认报文段，SYN=1（说明是连接确认报文段），ACK=1（说明是确认报文），seq=y（发送序号为y），ack=x+1（希望接收的信号是x+1）。

（3）客户端发送确认的确认，SYN=0（说明不是连接请求/接受报文），ACK=1（说明是确认报文），seq=x+1（发送的序列是x+1），ack=y+1（希望接收到的序列是y+1）

![image-20230308221312022](/Users/tom/Library/Application Support/typora-user-images/image-20230308221312022.png)

7. 洪泛攻击

SYN洪泛攻击是指客户端发送连接请求以后，不再回复确认信号，这样服务器就会一直发送报文这样的话每一个TCP连接都无法完成三次握手，从而导致死机。

8. 四次挥手

（1）发送连接释放报文段，停止发送数据，主动关闭TCP连接，FIN=1，seq=x。

（2）服务器返回一个确认报文段，连接处于半关闭状态，ACK=1，seq=v，ack=x+1

（3）服务器发送一个释放报文段，主动关闭TCP连接，FIN=1，ACK=1，seq=w，ack=x+1

（4）客户端发送确认报文段，ACK=1，seq=x+1，ack=w+1，等待2MSL（最长报文段寿命）以后，连接彻底关闭。

![image-20230308221349822](/Users/tom/Library/Application Support/typora-user-images/image-20230308221349822.png)

9. TCP可靠传输

TCP实现可靠传输的机制：

（1）校验

（2）序号

（3）确认

（4）重传

10. TCP流量控制

流量控制：让发送方慢点，要让接收方来得及接收。

TCP利用滑动窗口机制实现流量控制，接收方根据自己接收缓存的大小，动态的调整发送方的发送窗口大小，既rwnd，发送窗口根据拥塞窗口和发送窗口取值，去两者的最小值。拥塞窗口大小取决于拥塞控制方法。

（1）慢开始和拥塞避免

慢开始：每次拥塞都从1开始

拥塞避免：达到ssthresh值之前指数级增长，达到之后线性增长。

ssthresh变为拥塞时发送窗口的一半。

![image-20230308211039041](/Users/tom/Library/Application Support/typora-user-images/image-20230308211039041.png)

（2）快重传和快回复

快重传：收到三个重复的确认认为拥塞，开始执行快重传的算法

快恢复：一旦拥塞，发送窗口变为原来的一半，并之后线性增长

ssthresh变为拥塞时发送窗口的一半。

Ps:一半快重传和快恢复是一起执行的

![image-20230308211052958](/Users/tom/Library/Application Support/typora-user-images/image-20230308211052958.png)



# 六、应用层

1. 应用层功能

（1）文件传输、访问和管理FTP

（2）电子邮件SMTP、POP3

（3）虚拟终端HTTP

（4）查询服务和远程作业登录DNS

2. 网络应用模型

（1）客户/服务器模型，客户与服务器通信，使用服务器提供的服务。

应用WEB、FTP、远程登录、电子邮件。

（2）P2P模型：每个计算机即使客户端又是服务器，享受其他计算机的服务，自己又提供服务

3. 域名解析系统DNS

域名：顶级域名（国家）、二级域名（省行政区）、三级域名、四级域名

DNS：将域名解析为IP地址

域名服务器分为：根域名服务器、顶级域名服务器、权限域名服务器、本地域名服务器

4. 域名解析方法

（1）递归查询

本地查根-根查顶级-顶级差权限-权限返回顶级-顶级返回根-根返回本地

（2）递归与迭代相结合

本地查根-根返回本地-本地查顶级-顶级返回本地-本地查权限-权限返回本地

![image-20230308213000324](/Users/tom/Library/Application Support/typora-user-images/image-20230308213000324.png)

5. FTP协议

FTP协议：文件传输协议

使用TCP实现可靠传输

主动模式：端口号20

被动模式：服务器和客户端自行协商

FTP传输模式：

（1）文本模式：ASCII模式，以文本序列传输数据；

（2）二进制模式：Binary模式，以二进制序列传输数据。

6. 简单邮件协议SMTP

TCP连接，端口号25，采用C/S模式

SMTP的缺点：

（1）SMTP不能传送可执行文件或者其他二进制对象。

（2）SMTP仅限于传送7位ASCII码，不能传送其他非英语国家的文字。

（3）SMTP服务器会拒绝超过一定长度的邮件。

7. 邮局协议POP3

TCP连接，端口号110，C/S模式

![image-20230308213908550](/Users/tom/Library/Application Support/typora-user-images/image-20230308213908550.png)

8. 超文本传输协议HTTP协议

HTTP是无状态的（不记录用户信息），可以使用cookie去存储用户的访问记录

HTTP采用TCP作为运输层的协议，但他本身是无连接的，通信双方在交换HTTP报文之前不需要先建立HTTP连

接。

HTTP报文是面向文本的，因此在报文中的每一个字段都是一些ASCII码串

（1）非持久连接

（2）持久连接

![image-20230308214904196](/Users/tom/Library/Application Support/typora-user-images/image-20230308214904196.png)

9. http状态码

1xx表示通知信息的，如请求收到了或正在处理。

2xx表示成功，如接受或知道了。

3xx表示重定向，如要完成请求还必须采取进一步的行动。

4xx表示客户的差错，如请求中有错误的语法或不能完成。

5xx表示服务器的差错，如服务器失效无法完成请求。

10. 网页访问流程

（1）浏览器分析URL

（2）向DNS服务器发起域名解析

（3）DNS解析域名并返回IP地址

（4）根据IP地址找到服务器并建立连接

（5）浏览器发出请求页面的命令

（6）服务器给出响应，如果是持久连接可能持续传输数据

（7）释放TCP连接

（8）浏览器渲染页面

11. 某浏览器发出的请求报文

GET /index.html HTTP/1.1

Host: www.test.edu.cn

Connection: Close

Cookie: 123456

